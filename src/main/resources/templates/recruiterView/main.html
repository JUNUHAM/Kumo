<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>KUMO RECRUITER - 대시보드</title>
    <script th:src="@{/js/recruiter/main.js}"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/recruiter/header.css}" />
    <link
      rel="stylesheet"
      href="@{/css/NonLoginFragments/NonLoginFooter.css}"
    />
    <link rel="stylesheet" th:href="@{/css/recruiter/sidebar.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/main.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/rightSidebar.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/calendar.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/dark-theme.css}" />
  </head>
  <body>
    <header
      th:replace="~{recruiterView/fragments/header :: headerFragment}"
    ></header>

    <div class="dashboard-wrapper">
      <div
        th:replace="~{recruiterView/fragments/sidebar :: sidebarFragment}"
      ></div>

      <div class="main-container">
        <main class="content-body">
          <div class="dashboard-left-content">
            <div class="welcome-section mb-4">
              <h2
                th:utext="${#messages.msg('main.welcome.title', session.companyName ?: '원우')}"
              >
                어서오세요,
                <span>원우</span>
                사장님!
              </h2>
              <p class="text-muted" th:text="#{main.welcome.subtitle}">
                오늘의 채용 현황을 확인해보세요.
              </p>
            </div>

            <div class="stat-row">
              <div class="stat-card">
                <span
                  class="text-muted small"
                  th:text="#{main.stat.total_applicants}"
                  >전체 지원자</span
                >
                <h4
                  class="fw-bold mt-2 mb-0"
                  th:text="${#numbers.formatInteger(totalApplicants ?: 0, 0, 'COMMA')}"
                >
                  1,240
                </h4>
              </div>
              <div class="stat-card">
                <span
                  class="text-muted small"
                  th:text="#{main.stat.new_applicants}"
                  >미확인 지원자</span
                >
                <h4
                  class="fw-bold mt-2 mb-0 text-primary"
                  th:text="${#numbers.formatInteger(unreadApplicants ?: 0, 0, 'COMMA')}"
                >
                  82
                </h4>
              </div>
              <div class="stat-card">
                <span class="text-muted small" th:text="#{main.stat.total_jobs}"
                  >모집 중 공고</span
                >
                <h4
                  class="fw-bold mt-2 mb-0"
                  th:text="${#numbers.formatInteger(openJobCount ?: 0, 0, 'COMMA')}"
                >
                  12
                </h4>
              </div>
              <div class="stat-card">
                <span
                  class="text-muted small"
                  th:text="#{main.stat.today_visits}"
                  >오늘 방문수</span
                >
                <h4
                  class="fw-bold mt-2 mb-0 text-success"
                  th:text="${#numbers.formatInteger(todayVisits ?: 0, 0, 'COMMA')}"
                >
                  342
                </h4>
              </div>
            </div>

            <div class="mid-row mt-4">
              <section class="panel panel-scout">
                <div class="panel-header">
                  <h5
                    class="panel-title mb-0"
                    th:text="#{main.panel.scout_status}"
                  >
                    스카우트
                  </h5>
                </div>
                <div class="panel-body">
                  <div
                    class="empty-state"
                    th:if="${scoutList == null or #lists.isEmpty(scoutList)}"
                    th:text="#{main.scout.empty}"
                  >
                    스카우트할 인재가 없습니다.
                  </div>
                  <div class="scout-item" th:each="s : ${scoutList}">
                    <div class="scout-left">
                      <input
                        type="checkbox"
                        name="scoutIds"
                        th:value="${s.id}"
                      />
                      <img
                        class="scout-avatar"
                        th:src="${s.profileImage ?: '/images/default-avatar.png'}"
                        alt="avatar"
                      />
                      <span class="scout-name" th:text="${s.name}">이름</span>
                    </div>
                    <div class="scout-right">
                      <span class="scout-level" th:text="${s.level}">등급</span>
                    </div>
                  </div>
                </div>
              </section>

              <section class="panel panel-chart">
                <div class="panel-header">
                  <h5
                    class="panel-title mb-0"
                    th:text="#{main.panel.applicant_chart}"
                  >
                    일별 지원자 수
                  </h5>
                </div>
                <div class="panel-body">
                  <div class="chart-placeholder">
                    <canvas id="applicantChart"></canvas>
                  </div>
                </div>
              </section>
            </div>

            <section class="panel panel-myjobs mt-4">
              <div
                class="panel-header d-flex justify-content-between align-items-center"
              >
                <h5 class="panel-title mb-0" th:text="#{main.panel.my_jobs}">
                  내 공고
                </h5>
                <a
                  class="panel-link text-decoration-none"
                  th:href="@{/Recruiter/JobManage}"
                  th:text="#{main.sidebar.view_all}"
                  >전체보기</a
                >
              </div>
              <div class="panel-body">
                <div class="myjobs-head">
                  <span th:text="#{main.table.job}">공고</span>
                  <span th:text="#{main.table.position}">직무</span>
                  <span th:text="#{main.table.region}">지역</span>
                  <span th:text="#{main.table.salary}">급여</span>
                  <span th:text="#{main.table.contact}">연락처</span>
                  <span th:text="#{main.table.action}">액션</span>
                  <span th:text="#{main.table.date}">등록</span>
                </div>
                <div
                  class="empty-state"
                  th:if="${myJobList == null or #lists.isEmpty(myJobList)}"
                  th:text="#{main.jobs.empty}"
                >
                  등록된 공고가 없습니다.
                </div>
                <div class="myjobs-row" th:each="job : ${myJobList}">
                  <div class="job-title">
                    <div class="job-name text-truncate" th:text="${job.title}">
                      공고명
                    </div>
                  </div>
                  <div th:text="${job.position}">직무</div>
                  <div th:text="${job.region}">지역</div>
                  <div th:text="${job.wage}">급여</div>
                  <div th:text="${job.contact}">연락처</div>
                  <div>
                    <a
                      class="btn-detail"
                      th:href="@{/recruiter/jobs/{id}(id=${job.jobId})}"
                      th:text="#{main.btn.view_detail}"
                      >상세보기</a
                    >
                  </div>
                  <div
                    th:text="${#temporals.format(job.createdAt, 'yyyy-MM-dd')}"
                  >
                    등록
                  </div>
                </div>
              </div>
            </section>

            <footer
              th:replace="~{NonLoginFragments/NonLoginFooter :: footerFragment}"
            ></footer>
          </div>

          <div
            th:replace="~{recruiterView/fragments/rightSidebar :: rightSidebarFragment}"
          ></div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/6.1.10/index.global.min.js"></script>

    <script th:src="@{/js/recruiter/global-calendar.js}"></script>
  </body>
</html>
