<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>KUMO RECRUITER - 대시보드</title>

    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" th:href="@{/css/recruiter/header.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/sidebar.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/main.css}" />
    <link rel="stylesheet" th:href="@{/css/recruiter/rightSidebar.css}" />
</head>

<body>
<header th:replace="~{recruiterView/fragments/header :: headerFragment}"></header>

<div class="dashboard-wrapper">
    <div th:replace="~{recruiterView/fragments/sidebar :: sidebarFragment}"></div>

    <div class="main-container">
        <main class="content-body">
            <div class="dashboard-left-content">

                <!-- welcome -->
                <div class="welcome-section mb-4">
                    <h2>
                        어서오세요,
                        <span th:text="${session.companyName} ?: '원우'">원우</span>
                        사장님!
                    </h2>
                    <p class="text-muted">오늘의 채용 현황을 확인해보세요.</p>
                </div>

                <!-- KPI -->
                <div class="stat-row">
                    <div class="stat-card">
                        <span class="text-muted small">전체 지원자</span>
                        <h4 class="fw-bold mt-2 mb-0"
                            th:text="${#numbers.formatInteger(totalApplicants, 0, 'COMMA')}">1,240</h4>
                    </div>
                    <div class="stat-card">
                        <span class="text-muted small">미확인 지원자</span>
                        <h4 class="fw-bold mt-2 mb-0 text-primary"
                            th:text="${#numbers.formatInteger(unreadApplicants, 0, 'COMMA')}">82</h4>
                    </div>
                    <div class="stat-card">
                        <span class="text-muted small">모집 중 공고</span>
                        <h4 class="fw-bold mt-2 mb-0"
                            th:text="${#numbers.formatInteger(openJobCount, 0, 'COMMA')}">12</h4>
                    </div>
                    <div class="stat-card">
                        <span class="text-muted small">오늘 방문수</span>
                        <h4 class="fw-bold mt-2 mb-0 text-success"
                            th:text="${#numbers.formatInteger(todayVisits, 0, 'COMMA')}">342</h4>
                    </div>
                </div>

                <!-- ✅ (1) 스카우트 + 차트 (2컬럼 영역) -->
                <div class="mid-row">

                    <!-- 스카우트 -->
                    <section class="panel panel-scout">
                        <div class="panel-header">
                            <h5 class="panel-title mb-0">스카우트</h5>
                        </div>

                        <div class="panel-body">
                            <!-- 비었을 때 -->
                            <div
                                    class="empty-state"
                                    th:if="${scoutList == null or #lists.isEmpty(scoutList)}"
                            >
                                스카우트할 인재가 없습니다.
                            </div>

                            <!-- 리스트 -->
                            <div class="scout-item" th:each="s : ${scoutList}">
                                <div class="scout-left">
                                    <input type="checkbox" name="scoutIds" th:value="${s.id}" />
                                    <img
                                            class="scout-avatar"
                                            th:src="${s.profileImage != null ? s.profileImage : '/images/default-avatar.png'}"
                                            alt="avatar"
                                    />
                                    <span class="scout-name" th:text="${s.name}">Cameron Williamson</span>
                                </div>

                                <div class="scout-right">
                                    <span class="scout-level" th:text="${s.level}">아이티 초급</span>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 차트 -->
                    <section class="panel panel-chart">
                        <div class="panel-header">
                            <h5 class="panel-title mb-0">일별 지원자 수</h5>
                        </div>

                        <div class="panel-body">
                            <!-- 나중에 차트 라이브러리 넣을 자리 -->
                            <div class="chart-placeholder">CHART AREA</div>
                        </div>
                    </section>

                </div>

                <!-- ✅ (2) 내 공고 -->
                <section class="panel panel-myjobs mt-3">
                    <div class="panel-header d-flex justify-content-between align-items-center">
                        <h5 class="panel-title mb-0">내 공고</h5>
                        <a class="panel-link" th:href="@{/recruiter/jobs}">전체보기</a>
                    </div>

                    <div class="panel-body">
                        <!-- 헤더 라인 -->
                        <div class="myjobs-head">
                            <span>공고</span>
                            <span>직무</span>
                            <span>지역</span>
                            <span>급여</span>
                            <span>연락처</span>
                            <span></span>
                            <span>등록</span>
                        </div>

                        <!-- 비었을 때 -->
                        <div class="empty-state"
                             th:if="${myJobList == null or #lists.isEmpty(myJobList)}">
                            등록된 공고가 없습니다.
                        </div>

                        <!-- 리스트 -->
                        <div class="myjobs-row" th:each="job : ${myJobList}">
                            <div class="job-title">
                                <div class="job-name" th:text="${job.title}">공고명</div>
                            </div>

                            <div th:text="${job.position}">직무</div>
                            <div th:text="${job.region}">지역</div>
                            <div th:text="${job.wage}">급여</div>
                            <div th:text="${job.contact}">연락처</div>

                            <div>
                                <a class="btn-detail"
                                   th:href="@{/recruiter/jobs/{id}(id=${job.jobId})}">
                                    상세보기
                                </a>
                            </div>

                            <div th:text="${#temporals.format(job.createdAt, 'yyyy-MM-dd')}">등록</div>
                        </div>
                    </div>
                </section>

                <!-- ✅ 오른쪽 사이드바 (원래 위치 유지) -->
                <div th:replace="~{recruiterView/fragments/rightSidebar :: rightSidebarFragment}"></div>

                <!-- ✅ footer -->
                <footer th:replace="~{recruiterView/fragments/footer :: footerFragment}"></footer>

            </div> <!-- dashboard-left-content -->
        </main>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>