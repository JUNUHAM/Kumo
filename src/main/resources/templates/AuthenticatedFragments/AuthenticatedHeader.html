<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<div th:fragment="headerFragment">

    <header class="authenticated-header">

        <a th:href="@{/}" class="logo">
            <img th:src="@{/images/NonLogin/seekerLogo.png}" alt="KUMO" style="height: 40px;">
        </a>

        <nav>
            <ul class="nav-menu">
                <li><a th:href="@{/info}" th:text="#{header.company}">회사 정보</a></li>

                <li class="icon-btn notification-container" id="notifyBtn">
                    <i class="fa-regular fa-bell"></i>
                    <span class="notify-badge" style="display: none;">0</span>

                    <div class="notify-dropdown" id="notifyMenu">
                        <div class="notify-header">
                            <span th:text="#{header.notifications}">알림</span>
                            <div class="header-buttons">
                                <button class="header-btn read-all" id="markAllReadBtn" th:text="#{header.mark_read}">모두 읽음</button>
                                <span class="divider">|</span>
                                <button class="header-btn delete-all" id="deleteAllBtn" th:text="#{header.delete_all}">전체 삭제</button>
                            </div>
                        </div>

                        <div class="notify-body" id="notifyList">
                            <div class="notify-empty" id="notifyEmpty" style="display: none;">
                                <i class="fa-regular fa-bell-slash"></i>
                                <p th:text="#{notification.empty}">새로운 알림이 없습니다.</p>
                            </div>
                        </div>

                        <div class="notify-footer" id="expandBtn"
                             th:data-more="#{notification.more}"
                             th:data-fold="#{notification.fold}">
                            <span th:text="#{notification.more}">더 보기</span>
                            <i class="fa-solid fa-chevron-down"></i>
                        </div>
                    </div>
                </li>

                <li class="icon-btn lang-container" id="langBtn">
                    <i class="fa-solid fa-globe"></i>
                    <div class="lang-dropdown" id="langMenu">
                        <a href="javascript:changeLang('ko')" class="lang-item">한국어</a>
                        <a href="javascript:changeLang('ja')" class="lang-item">日本語</a>
                    </div>
                </li>

                <li class="icon-btn" id="darkModeBtn">
                    <i class="fa-regular fa-sun" id="darkModeIcon"></i>
                </li>

                <li class="profile-container" id="profileBtn">
                    <img th:src="${user != null and user.profileImage != null ? user.profileImage : '/images/default_profile.png'}"
                         class="user-avatar" alt="Profile">

                    <div class="profile-dropdown" id="profileMenu">
                        <div class="profile-info">
                            <span class="user-name" th:text="${#authentication.principal.nickname}">User</span>
                            <span class="user-email" th:text="${#authentication.name}">email@test.com</span>
                        </div>
                        <hr>
                        <a th:href="@{/mypage}" class="profile-item">
                            <i class="fa-regular fa-user"></i>
                            <span th:text="#{profile.mypage}">마이페이지</span>
                        </a>
                        <a th:href="@{/resume}" class="profile-item">
                            <i class="fa-regular fa-file-lines"></i>
                            <span th:text="#{profile.resume}">내 이력서</span>
                        </a>
                        <a th:href="@{/history}" class="profile-item">
                            <i class="fa-regular fa-bell"></i>
                            <span th:text="#{profile.history}">지원 내역 확인</span>
                        </a>
                        <a th:href="@{/settings}" class="profile-item">
                            <i class="fa-solid fa-gear"></i>
                            <span th:text="#{profile.settings}">설정</span>
                        </a>
                        <hr>
                        <a th:href="@{/logout}" class="profile-item logout">
                            <i class="fa-solid fa-right-from-bracket"></i>
                            <span th:text="#{profile.logout}">로그아웃</span>
                        </a>
                    </div>
                </li>
            </ul>
        </nav>
    </header>

    <script th:src="@{/js/AuthenticatedHeader/AuthenticatedHeader.js}"></script>
</div>
</html>